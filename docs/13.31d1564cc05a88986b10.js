(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{FXGF:function(n,t,e){"use strict";e.r(t),e.d(t,"QuestionPageModule",(function(){return C}));var i=e("Yvf7"),o=e("8VHZ"),c=e("P4DM"),s=e("Fk62"),l=e("Ub9n"),r=e("UcdY"),u=e("vlQ6");let b=(()=>{class n{constructor(n){this.sanitized=n}transform(n){var t,e;if(n){const i=n.split("</oembed>");let o="";return i.forEach((n,t)=>{o+=i[t]+"</oembed>";const e=n.split('url="')[1];if(e){const n=e.split('">')[0];if(n){const t=n.split("https://www.youtube.com/watch?v=")[1].split("&")[0];t&&(o+=`\n                <div class="pnl-iframe">\n                  <iframe src="https://youtube.com/embed/${t}" frameborder="0"; scrolling="no"; allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n                </div>\n              `)}}}),null===(e=null===(t=window.MathJax)||void 0===t?void 0:t.Hub)||void 0===e||e.Queue(["Typeset",window.MathJax.Hub]),this.sanitized.bypassSecurityTrustHtml(o)}return n}}return n.\u0275fac=function(t){return new(t||n)(l.Ib(u.b))},n.\u0275pipe=l.Hb({name:"getContentView",type:n,pure:!0}),n})();function a(n,t){if(1&n&&(l.Nb(0,"ion-col",9),l.Nb(1,"div",10),l.Nb(2,"div"),l.Nb(3,"a",11),l.lc(4),l.Mb(),l.Mb(),l.Nb(5,"div"),l.Nb(6,"small"),l.lc(7),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&n){const n=l.Xb(2);l.yb(3),l.dc("href",null==n.questionSet?null:n.questionSet.url,l.ic),l.yb(1),l.mc(null==n.questionSet?null:n.questionSet.source),l.yb(3),l.mc(null==n.questionSet?null:n.questionSet.url)}}function f(n,t){if(1&n&&(l.Nb(0,"ion-col",9),l.Jb(1,"div",12),l.Yb(2,"getContentView"),l.Mb()),2&n){const n=l.Xb(2);l.yb(1),l.cc("innerHtml",l.Zb(2,1,null==n.questionSet?null:n.questionSet.content),l.hc)}}function d(n,t){if(1&n&&l.Jb(0,"ion-icon",20),2&n){const n=l.Xb().$implicit;l.dc("name",n.isAnswer?"checkmark":"close")}}function h(n,t){if(1&n&&(l.Nb(0,"ion-item"),l.Jb(1,"ion-radio",18),l.Nb(2,"ion-label"),l.lc(3),l.Mb(),l.kc(4,d,1,1,"ion-icon",19),l.Mb()),2&n){const n=t.$implicit,e=l.Xb(2).index,i=l.Xb(2);l.yb(1),l.dc("value",n.content),l.yb(2),l.mc(n.content),l.yb(1),l.cc("ngIf",i.isShowAnswer[e])}}function g(n,t){if(1&n&&(l.Nb(0,"ion-radio-group"),l.kc(1,h,5,3,"ion-item",17),l.Mb()),2&n){const n=l.Xb().$implicit;l.yb(1),l.cc("ngForOf",n.options)}}function m(n,t){if(1&n&&l.Jb(0,"ion-icon",20),2&n){const n=l.Xb().$implicit;l.dc("name",n.isAnswer?"checkmark":"close")}}function p(n,t){if(1&n&&(l.Nb(0,"ion-item"),l.Jb(1,"ion-checkbox",21),l.Nb(2,"ion-label"),l.lc(3),l.Mb(),l.kc(4,m,1,1,"ion-icon",19),l.Mb()),2&n){const n=t.$implicit,e=l.Xb(2).index,i=l.Xb(2);l.yb(3),l.mc(n.content),l.yb(1),l.cc("ngIf",i.isShowAnswer[e])}}function S(n,t){if(1&n&&(l.Nb(0,"ion-list"),l.kc(1,p,5,2,"ion-item",17),l.Mb()),2&n){const n=l.Xb().$implicit;l.yb(1),l.cc("ngForOf",n.options)}}function y(n,t){if(1&n&&l.Jb(0,"ion-item",12),2&n){const n=l.Xb().$implicit;l.cc("innerHtml",n.comment,l.hc)}}function w(n,t){if(1&n){const n=l.Ob();l.Nb(0,"ion-col",9),l.Nb(1,"ion-list"),l.Jb(2,"ion-item",12),l.Yb(3,"getContentView"),l.Lb(4,13),l.kc(5,g,2,1,"ion-radio-group",14),l.kc(6,S,2,1,"ion-list",14),l.Kb(),l.kc(7,y,1,1,"ion-item",15),l.Nb(8,"ion-item"),l.Nb(9,"ion-label"),l.lc(10,"\u986f\u793a\u7b54\u6848"),l.Mb(),l.Nb(11,"ion-toggle",16),l.Vb("ngModelChange",(function(e){l.gc(n);const i=t.index;return l.Xb(2).isShowAnswer[i]=e})),l.Mb(),l.Mb(),l.Mb(),l.Mb()}if(2&n){const n=t.$implicit,e=t.index,i=l.Xb(2);l.yb(2),l.cc("innerHtml",l.Zb(3,6,n.content),l.hc),l.yb(2),l.cc("ngSwitch",n.type),l.yb(1),l.cc("ngSwitchCase",2),l.yb(1),l.cc("ngSwitchCase",3),l.yb(1),l.cc("ngIf",i.isShowAnswer[e]&&n.comment),l.yb(4),l.cc("ngModel",i.isShowAnswer[e])}}function M(n,t){if(1&n){const n=l.Ob();l.Nb(0,"ion-button",22),l.Vb("click",(function(){return l.gc(n),l.Xb(2).onBtnQueryPreviousClicked()})),l.lc(1,"\u4e0a\u4e00\u984c"),l.Mb()}}function v(n,t){if(1&n){const n=l.Ob();l.Nb(0,"ion-button",22),l.Vb("click",(function(){return l.gc(n),l.Xb(2).onBtnQueryNextClicked()})),l.lc(1,"\u4e0b\u4e00\u984c"),l.Mb()}}function q(n,t){if(1&n&&(l.Nb(0,"ion-grid",3),l.Nb(1,"ion-row"),l.kc(2,a,8,3,"ion-col",4),l.kc(3,f,3,3,"ion-col",4),l.kc(4,w,12,8,"ion-col",5),l.Nb(5,"ion-col",6),l.Nb(6,"div"),l.kc(7,M,2,0,"ion-button",7),l.kc(8,v,2,0,"ion-button",7),l.Mb(),l.Nb(9,"p",8),l.Nb(10,"small"),l.lc(11),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&n){const n=l.Xb();l.yb(2),l.cc("ngIf",(null==n.questionSet?null:n.questionSet.source)||(null==n.questionSet?null:n.questionSet.url)),l.yb(1),l.cc("ngIf",null==n.questionSet?null:n.questionSet.content),l.yb(1),l.cc("ngForOf",null==n.questionSet?null:n.questionSet.questions),l.yb(3),l.cc("ngIf",n.current>1),l.yb(1),l.cc("ngIf",n.current<n.total),l.yb(3),l.oc("",n.current," / ",n.total,"")}}const k=[{path:"",component:(()=>{class n{constructor(n,t){var e;this.questionService=n,this.toastController=t,this.isAutoSave=!1,this.response=null,this.questionSet=null,this.total=0,this.current=1,this.isShowAnswer=[],this.isAutoSave="TRUE"===(null===(e=localStorage.getItem("isAutoSaveQuestion"))||void 0===e?void 0:e.toUpperCase()),this.response=localStorage.getItem("lastAutiSaveQuestionDoc"),this.questionService.count().subscribe(n=>{this.total=n}),this.query(0)}ngOnInit(){}onAutoSaveChange(n){localStorage.setItem("isAutoSaveQuestion",n.detail.checked)}onBtnQueryNextClicked(){this.query(1)}onBtnQueryPreviousClicked(){this.query(-1)}query(n){this.current+=n,this.questionService.list({direction:n,response:this.response}).subscribe(n=>{var t,e;this.response=null===(t=n[0])||void 0===t?void 0:t.payload.doc,localStorage.setItem("lastAutiSaveQuestionDoc",this.isAutoSave?this.response:null),this.questionSet=n.map(n=>{const t=n.payload.doc.data();return Object.assign({id:n.payload.doc.id},t)})[0],this.isShowAnswer=[],null===(e=this.questionSet)||void 0===e||e.questions.forEach(n=>{this.isShowAnswer.push(!1)}),this.questionSet||this.toastController.create({message:"\u67e5\u7121\u8cc7\u6599",duration:3e3,color:"danger"}).then(n=>{n.present()})})}}return n.\u0275fac=function(t){return new(t||n)(l.Ib(r.a),l.Ib(c.K))},n.\u0275cmp=l.Cb({type:n,selectors:[["app-question"]],decls:6,vars:2,consts:[["lines","full"],[3,"ngModel","ngModelChange","ionChange"],["class","pnl-questionset",4,"ngIf"],[1,"pnl-questionset"],["size","12",4,"ngIf"],["size","12",4,"ngFor","ngForOf"],["size","12",1,"ion-text-center"],[3,"click",4,"ngIf"],[1,"ion-text-center"],["size","12"],[1,"pnl-source"],["target","_blank",3,"href"],[3,"innerHtml"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"innerHtml",4,"ngIf"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["slot","start",3,"value"],["slot","end",3,"name",4,"ngIf"],["slot","end",3,"name"],["slot","start"],[3,"click"]],template:function(n,t){1&n&&(l.Nb(0,"ion-content"),l.Nb(1,"ion-item",0),l.Nb(2,"ion-label"),l.lc(3,"\u8a18\u4f4f\u9032\u5ea6"),l.Mb(),l.Nb(4,"ion-toggle",1),l.Vb("ngModelChange",(function(n){return t.isAutoSave=n}))("ionChange",(function(n){return t.onAutoSaveChange(n)})),l.Mb(),l.Mb(),l.kc(5,q,12,7,"ion-grid",2),l.Mb()),2&n&&(l.yb(4),l.cc("ngModel",t.isAutoSave),l.yb(1),l.cc("ngIf",t.questionSet))},directives:[c.h,c.l,c.m,c.D,c.a,o.d,o.e,i.i,c.i,c.u,i.h,c.g,c.n,i.j,i.k,c.s,c.J,c.r,c.H,c.k,c.e,c.c],pipes:[b],styles:[".pnl-questionset[_ngcontent-%COMP%]{width:100%}.pnl-source[_ngcontent-%COMP%]{margin-left:1rem;margin-top:1rem}  iframe{width:100%;min-height:300px}  figure{margin:0 0 0 1rem}"]}),n})()}];let N=(()=>{class n{}return n.\u0275mod=l.Gb({type:n}),n.\u0275inj=l.Fb({factory:function(t){return new(t||n)},imports:[[s.h.forChild(k)],s.h]}),n})(),C=(()=>{class n{}return n.\u0275mod=l.Gb({type:n}),n.\u0275inj=l.Fb({factory:function(t){return new(t||n)},imports:[[i.b,o.a,c.F,N]]}),n})()}}]);